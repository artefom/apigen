# ApiGen

Rust server-side code generator

# Installation

```bash
git clone git@github.com:artefom/apigen.git

cd apigen

# # [Optionally, create and activate python3 environment]
# python3 -m venv ./.venv
# source .venv/bin/activate

pip install .
```

# Usage


## Generate server-side code

run
```bash

cargo init helloworld

# Create server module
touch helloworld/src/server.rs
mkdir -p helloworld/src/server/static
cd helloworld/src/server

# Create and Implement openapi.yaml
touch static/openapi.yaml

# Generate rust api (must launch it every time openapi spec changes)
apigen rs static/openapi.yaml > api.rs

# Generate documentation html with your given application title
apigen html helloworld > static/docs.html

# Implement server.rs and main.rs
```

This generated module exposes `ApiService` trait with methods defined in the openapi.yaml.

This trait needs to be implemented and passed to function `run_service`

The generated module will also serve documentation page and swagger documentation.
Files `static/openapi.yaml` `static/docs.html` need to be accessible from the directory of the generated file.

The recommended project structure is as follows:
```bash
src
├── main.rs
├── server
│   ├── api.rs            # Generated by apigen
│   └── static
│       ├── docs.html     # Generated by apigen (See serving swagger)
│       └── openapi.yaml  # Openapi spec, defined by user
└── server.rs             # Implementation of the methods
```

For more examples see ./examples directory

## Implement ApiService trait

The generated apiservice trait needs to be implemented by user in parent module.

We do not implement methods directly in api.rs so that we can re-generate the api.rs in the future
